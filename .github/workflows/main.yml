name: 'Build, push and deploy docker images'

on:
  push:
    branches: [ configure_ci/cd ]
  pull_request:
    branches: [ configure_ci/cd ]

jobs:

  prepare-base-image:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Login to docker registry
      run: docker login -u yerlankussainov -p kolbasa21 docker.io
    - name: Build base docker image
      run: docker build -t yerlankussainov/test-repo:base .
    - name: Push base docker image
      run: docker push yerlankussainov/test-repo:base