image: docker:dind

stages:
  - prepare-dependecies
  - build
  - publish

prepare-base-image:
  stage: prepare-dependecies
  script:
    - docker login gitlab.mems.fun:5005
    - docker build -t gitlab.mems.fun:5005/memebattle/frontend:base .
    - docker push gitlab.mems.fun:5005/memebattle/frontend:base
  only:
    refs:
      - master
